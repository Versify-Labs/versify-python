{
  "version": "1.0.0",
  "platformVersion": "12.0.3",
  "triggers": {
    "new_contact": {
      "operation": {
        "perform": {
          "source": "return [bundle.cleanedRequest.data.object];"
        },
        "inputFields": [],
        "type": "hook",
        "canPaginate": false,
        "performSubscribe": {
          "source": "const options = {\n  url: 'https://api.versifylabs.com/v1/webhooks',\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'X-Organization': bundle.authData.organization,\n    'X-Api-Key': bundle.authData.api_key\n  },\n  params: {},\n  body: {\n    'url': bundle.targetUrl,\n    'enabled_events': [\"contact.created\"]\n  }\n}\n\nreturn z.request(options)\n  .then((response) => {\n    response.throwForStatus();\n    const results = response.json;\n\n    // You can do any parsing you need for results here before returning them\n\n    return results;\n  });"
        },
        "performUnsubscribe": {
          "source": "const options = {\n  url: `https://api.versifylabs.com/v1/webhooks/${bundle.subscribeData.id}`,\n  method: 'DELETE',\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'X-Organization': bundle.authData.organization,\n    'X-Api-Key': bundle.authData.api_key\n  },\n  params: {},\n  body: {}\n}\n\nreturn z.request(options)\n  .then((response) => {\n    response.throwForStatus();\n    const results = response.json;\n\n    // You can do any parsing you need for results here before returning them\n\n    return results;\n  });"
        },
        "performList": {
          "source": "const options = {\n  url: 'https://api.versifylabs.com/v1/contacts',\n  method: 'GET',\n  headers: {\n    'Accept': 'application/json',\n    'X-Organization': bundle.authData.organization,\n    'X-Api-Key': bundle.authData.api_key\n  },\n  params: {}\n}\n\nreturn z.request(options)\n  .then((response) => {\n    response.throwForStatus();\n    const results = response.json;\n\n    // You can do any parsing you need for results here before returning them\n    const data = results.data\n\n    return data;\n  });"
        },
        "sample": {
          "id": "cont_123",
          "object": "contact",
          "created": 1657078902,
          "active": true,
          "balance": 0,
          "currency": "usd",
          "email": "jane@example.com",
          "first_name": "Jane",
          "last_name": "Doe",
          "name": "Jane Doe",
          "organization": "org_123",
          "source": "versify",
          "tags": []
        },
        "outputFields": [
          {
            "key": "id",
            "label": "ID",
            "type": "string"
          },
          {
            "key": "object",
            "label": "Object",
            "type": "string"
          },
          {
            "key": "created",
            "type": "integer",
            "label": "Created At"
          },
          {
            "key": "active",
            "type": "boolean",
            "label": "Activec"
          },
          {
            "key": "balance",
            "label": "Balance",
            "type": "integer"
          },
          {
            "key": "currency",
            "label": "Currency"
          },
          {
            "key": "email",
            "label": "Email Address",
            "type": "string"
          },
          {
            "key": "first_name",
            "label": "First Name",
            "type": "string"
          },
          {
            "key": "last_name",
            "label": "Last Name",
            "type": "string"
          },
          {
            "key": "name",
            "label": "Full Name",
            "type": "string"
          },
          {
            "key": "organization",
            "label": "Organization ID",
            "type": "string"
          },
          {
            "key": "source",
            "label": "Source",
            "type": "string"
          }
        ]
      },
      "key": "new_contact",
      "noun": "Contact",
      "display": {
        "label": "New Contact",
        "description": "Triggers when a new contact is created.",
        "hidden": false,
        "important": true
      }
    }
  },
  "creates": {
    "create_contact": {
      "key": "create_contact",
      "noun": "Contact",
      "display": {
        "label": "Create Contact",
        "description": "Creates a Contact",
        "hidden": false,
        "important": true
      },
      "operation": {
        "inputFields": [
          {
            "key": "avatar",
            "label": "Avatar URL",
            "type": "string",
            "required": false,
            "list": false,
            "altersDynamicFields": false
          },
          {
            "key": "currency",
            "label": "Currency",
            "type": "string",
            "required": false,
            "list": false,
            "altersDynamicFields": false
          },
          {
            "key": "description",
            "label": "Description",
            "type": "string",
            "required": false,
            "list": false,
            "altersDynamicFields": false
          },
          {
            "key": "email",
            "label": "Email Address",
            "type": "string",
            "required": true,
            "list": false,
            "altersDynamicFields": false
          },
          {
            "key": "first_name",
            "label": "First name",
            "type": "string",
            "required": false,
            "list": false,
            "altersDynamicFields": false
          },
          {
            "key": "last_name",
            "label": "Last name",
            "type": "string",
            "required": false,
            "list": false,
            "altersDynamicFields": false
          },
          {
            "key": "name",
            "label": "Name",
            "type": "string",
            "required": false,
            "list": false,
            "altersDynamicFields": false
          },
          {
            "key": "phone",
            "label": "Phone number",
            "type": "string",
            "required": false,
            "list": false,
            "altersDynamicFields": false
          },
          {
            "key": "tags",
            "label": "Tags",
            "type": "string",
            "required": false,
            "list": true,
            "altersDynamicFields": false
          },
          {
            "key": "source",
            "label": "Source",
            "type": "string",
            "default": "zapier",
            "required": false,
            "list": false,
            "altersDynamicFields": false
          }
        ],
        "sample": {
          "id": "cont_62c39d36ee1f6d178eeaf9d3",
          "object": "contact",
          "created": 1656986934,
          "active": true,
          "address": null,
          "avatar": null,
          "balance": 0,
          "currency": "usd",
          "description": null,
          "email": "troywsmith123@gmail.com",
          "first_name": null,
          "last_name": null,
          "metadata": {},
          "name": null,
          "organization": "org_c0ZBBtQke5pXOMVn",
          "phone": null,
          "shipping": null,
          "source": "versify",
          "tags": []
        },
        "outputFields": [
          {
            "key": "id",
            "label": "Contact ID"
          },
          {
            "key": "object",
            "type": "string",
            "label": "Object Type"
          },
          {
            "key": "created",
            "type": "integer",
            "label": "Created Timestamp"
          },
          {
            "key": "active",
            "type": "boolean",
            "label": "Active"
          },
          {
            "key": "address",
            "label": "Address"
          },
          {
            "key": "avatar",
            "label": "Avatar Image"
          },
          {
            "key": "balance",
            "label": "Balance",
            "type": "integer"
          },
          {
            "key": "currency",
            "label": "Currency"
          },
          {
            "key": "description",
            "label": "Description"
          },
          {
            "key": "email",
            "label": "Email address"
          },
          {
            "key": "first_name",
            "label": "First name"
          },
          {
            "key": "last_name",
            "label": "Last name"
          },
          {
            "key": "name",
            "label": "Full name"
          },
          {
            "key": "organization"
          },
          {
            "key": "phone"
          },
          {
            "key": "shipping"
          },
          {
            "key": "source"
          }
        ],
        "perform": {
          "body": {
            "email": "{{bundle.inputData.email}}",
            "currency": "{{bundle.inputData.currency}}",
            "description": "{{bundle.inputData.description}}",
            "first_name": "{{bundle.inputData.first_name}}",
            "last_name": "{{bundle.inputData.last_name}}",
            "name": "{{bundle.inputData.name}}",
            "phone": "{{bundle.inputData.phone}}",
            "source": "{{bundle.inputData.source}}",
            "tags": "{{bundle.inputData.tags}}",
            "avatar": "{{bundle.inputData.avatar}}"
          },
          "headers": {
            "Content-Type": "application/json",
            "Accept": "application/json",
            "X-Api-Key": "{{bundle.authData.api_key}}",
            "X-Organization": "{{bundle.authData.organization}}"
          },
          "method": "POST",
          "removeMissingValuesFrom": {
            "params": true,
            "body": true
          },
          "url": "https://api.versifylabs.com/v1/contacts"
        }
      }
    }
  },
  "authentication": {
    "type": "custom",
    "test": {
      "headers": {
        "X-Api-Key": "{{bundle.authData.api_key}}",
        "X-Organization": "{{bundle.authData.organization}}"
      },
      "params": {
        "api_key": "{{bundle.authData.api_key}}",
        "organization": "{{bundle.authData.organization}}"
      },
      "removeMissingValuesFrom": {
        "params": true,
        "body": true
      },
      "url": "https://api.versifylabs.com/partners/all/ping"
    },
    "fields": [
      {
        "computed": false,
        "key": "organization",
        "required": true,
        "label": "Organization",
        "type": "string",
        "helpText": "Go to the [Integrations](https://dashboard.versifylabs.com/dashboard/integrations) screen from your Versify Dashboard to find your Organization ID."
      },
      {
        "computed": false,
        "key": "api_key",
        "required": true,
        "label": "API Key",
        "type": "password",
        "helpText": "Go to the [Integrations](https://dashboard.versifylabs.com/dashboard/integrations) screen from your Versify Dashboard to find your API Key."
      }
    ],
    "customConfig": {},
    "connectionLabel": "{{display_name}}"
  }
}
